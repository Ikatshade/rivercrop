<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="profile.css">
    <link rel="stylesheet" href="sidebar.css">
    <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/iconify-icon@1.0.7/dist/iconify-icon.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Manrope:wght@200;300;400&family=Poppins:wght@300;400;500;600;700;800;900&display=swap"
        rel="stylesheet">
    <title>Profile</title>
</head>

<body>
    <style type="text/css" media="print">
        body { visibility: hidden; display: none }
    </style>
    <div class="container">
        <div class="innercontent">
            <nav>
                <div class="content">
                    <div class="logo">
                        <img src="/img/R (1).png" alt="">
                    </div>
                    <div class="menu">
                        <a href="dashboard.html" class="clicked"><iconify-icon icon="bi:grid"
                                rotate="90deg"></iconify-icon></span><span>Dashboard</span></a>
                        <a href=""><iconify-icon
                                icon="fluent-mdl2:player-settings"></iconify-icon><span>Admins</span></a>
                        <a href=""><iconify-icon icon="carbon:report"></iconify-icon><span>Reports</span></a>
                        <a href=""><iconify-icon icon="fluent:settings-32-regular"
                                rotate="90deg"></iconify-icon><span>Settings</span></a>
                    </div>
                </div>
                <div class="logout-b">
                    <a href="sign.html"><iconify-icon icon="material-symbols:output-circle-rounded"
                            rotate="270deg"></iconify-icon><span>Logout</span></a>
                </div>
            </nav>

            <div class="right-part">
                <div class="details">

                    <div class="return">
                        <a href="dashboard.html">
                            <iconify-icon icon="octicon:arrow-left-24"></iconify-icon>
                        </a>
                    </div>

                    <div class="per-details">

                        <div class="user-p">
                            <span>
                                <iconify-icon icon="ph:user-light"></iconify-icon>
                            </span>
                        </div>

                        <div class="user-name">
                            <span>Naima dullard</span>
                        </div>

                        <div class="emp-details">
                            <span class="title">
                                Employee details
                                <iconify-icon icon="circum:edit" onclick="openForm()"></iconify-icon>
                            </span>
                            <div class="detail-list">
                                <div class="l">
                                    <span class="tit">Number</span>
                                    <span class="ans" id="num">+225 06 777 788 04</span>
                                </div>
                                <div class="l">
                                    <span class="tit">Date of birth</span>
                                    <span class="ans" id="date">+225 06 777 788 04</span>
                                </div>
                                <div class="l">
                                    <span class="tit">location</span>
                                    <span class="ans" id="loc">+225 06 777 788 04</span>
                                </div>
                                <div class="l">
                                    <span class="tit">Responsiblity</span>
                                    <span class="ans" id="resp">+225 06 777 788 04</span>
                                </div>
                            </div>
                        </div>

                    </div>

                    <div class="notes">
                        <div class="in">
                            <span class="t">
                                Notes <iconify-icon icon="ph:plus-light"></iconify-icon>
                            </span>
                            <textarea name="" id="" cols="10" rows="10"></textarea>
                        </div>

                    </div>

                </div>

                <div class="task-List">
                    <div class="option-line">
                        <button class="task" onclick="swapTask()">Tasks</button>
                        <button class="pay" onclick="swapPayment()">payment</button>
                    </div>
                    <div class="inner-content">
                        <div class="tasks" id="tasks">
                            <h3>Daily tasks</h3>
                            <div class="card">
                                <div class="list">

                                </div>
                            </div>
                        </div>
                        <div class="payment" id="payment">
                            <h3>Daily tasks</h3>
                        </div>
                    </div>
                    <div class="add-button">
                        <span class="plus" onclick="openAdd()"><iconify-icon icon="ph:plus-thin"></iconify-icon></span>
                    </div>
                </div>
            </div>
        </div>


        <div id="myForm" class="form-popup">
            <div class="form-container">
                <div class="form-builder">
                   
                    <div class="conten">
                        <iconify-icon icon="akar-icons:cross" onclick="closeForm()"></iconify-icon>

                        <form class="form" onsubmit="modify()">
                            <div class="line">
                                <div class="inputBox half">
                                    <input type="text" name="" id="fname" required>
                                    <span>First Name</span>
                                </div>
                                <div class="inputBox half">
                                    <input type="text" name="" id="lname" required>
                                    <span>Last Name</span>
                                </div>
                            </div>

                            <div class="inputBox date">
                                <input type="date" name="" id="birth" required>
                                <span>date of birth</span>
                            </div>
                            <div class="inputBox num">
                                <input type="text" name="" id="number" required>
                                <span>Number</span>
                            </div>

                            <div class="inputBox d">
                                <select name="" id="resp" required>
                                    <option value="" disabled selected>Responsiblity</option>
                                    <option value="on ground manager">On Ground manager</option>
                                    <option value="farmer">farmer</option>
                                    <option value="ranch holder">Ranch holder</option>
                                    <option value="farm irigation">Farm Irigation</option>
                                    <option value="machinery">Machinery</option>
                                    <option value="food safety">food safety</option>
                                </select>
                                <span>Responsiblity</span>
                            </div>

                            <div class="inputBox d">
                                <select name="" id="loc" required>
                                    <option value="" disabled selected>Location</option>
                                    <option value="abidjan">Abidjan</option>
                                    <option value="yamoussoukro">Yamoussoukro</option>
                                    <option value="bouaké">Bouaké</option>
                                    <option value="korhogo">Korhogo</option>
                                    <option value="odiénné">Odiénné</option>
                                    <option value="man">Man</option>
                                </select>
                                <span>Location</span>
                            </div>

                            <input class="btn" type="submit" value="Modify">
                        </form>
                    </div>
                    
                </div>

            </div>
    </div>
        <div id="my-add-Form" class="form-popup" onsubmit="addtask(); return false">
            <div class="form-container">
                <div class="form-builder">
                   
                    <div class="conten">
                        <iconify-icon icon="akar-icons:cross" onclick="closeAdd()"></iconify-icon>
                        <iconify-icon class="task-icon" icon="material-symbols:task-alt-rounded"></iconify-icon>

                        <form class="form">
                            <div class="inputBox">
                                <input type="text" name="" id="task-name" required>
                                <span>Task Name</span>
                            </div>
                            <div class="inputBox">
                                <!-- <input type="text" class="desc" name="" id="task-desc" required> -->
                                <textarea class="desc" name="" id="desc" cols="10" rows="10" required></textarea>
                                <span>Task Description</span>
                            </div>

                            <input class="btn" type="submit" value="Add task">
                        </form>
                    </div>
                    
                </div>

            </div>
    </div>
    <script>

        pay = document.getElementById('payment')
        task = document.getElementById('tasks')
        add = document.querySelector('.add-button')
        b1= document.querySelector('.task')
        b2 = document.querySelector('.pay')
        const monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
        function swapPayment() {
            task.style.display = 'none'
            add.style.display = 'none'
            pay.style.display = 'flex';
            b2.style.background = '#B4CD93'
            b1.style.background = 'transparent'
        }
        function swapTask() {
            pay.style.display = 'none'
            task.style.display = 'flex'
            add.style.display = 'flex'
            b1.style.background = '#B4CD93'
            b2.style.background = 'transparent'

        }

          /* Open the form */
          function openForm() {
            em = getemp()
            document.getElementById("myForm").style.display = "block";
            document.getElementById("fname").value = em.firstname
            document.getElementById("lname").value = em.Lastname
            document.getElementById("birth").value = em.birthdate
            document.getElementById("number").value = em.number
            document.getElementById("loc").value = em.location 
            document.getElementById("resp").value = em.responsibility
        }
          function openAdd() {
            document.getElementById("my-add-Form").style.display = "block";
        }

        /* Close the form */
        function closeForm() {
            document.getElementById("myForm").style.display = "none";
        }
        function closeAdd() {
            document.getElementById("my-add-Form").style.display = "none";
        }

        function getemp(){
            return JSON.parse(localStorage.getItem('employee'))
        }
        function getemplist(){
            return JSON.parse(localStorage.getItem('Employees'))
        }


        function setemp(object){
            return localStorage.setItem("employee", JSON.stringify(object))
        }
        function setemplist(object){
            emplist = getemplist()
            emp = getemp()
            found = emplist.findIndex(e => e.id === emp.id)
            emplist[found] = object
            return localStorage.setItem("Employees", JSON.stringify(object))

        }

        function modify() {
            em = getemp()
            fname = document.getElementById('fname').value
            lname = document.getElementById('lname').value
            birth = document.getElementById('birth').value
            num = document.getElementById('number').value
            loc = document.getElementById('loc').value
            resp = document.getElementById('resp').value
            em.firstname = fname
            em.Lastname = lname
            em.birthdate = birth
            em.number = num
            em.location = loc
            em.responsibility = resp
            setemp(em)
            setemplist(em)
        }

        function addtask() {
            em = getemp()
            console.log(em)
            tname = document.getElementById("task-name").value
            tdesc = document.getElementById("desc").value

           const task = {
                task: tname,
                description: tdesc,
                completed: false
            }

            em.tasks.push(task)
            setemp(em)
            setemplist(em)

        }
        em = getemp()
        namebox = document.querySelector('.user-name span')
        namebox.textContent = em.firstname  + " " + em.Lastname
        num = document.getElementById('num')
        num.textContent = "+225 " + em.number
        date = document.getElementById('date')
        dateinput = new Date(em.birthdate)
        const format = `${dateinput.toLocaleString('eng', { month: 'long' })} ${dateinput.getDate()}, ${dateinput.getFullYear()}`;
        date.textContent = format
        loc = document.getElementById('loc')
        loc.textContent = em.location
        resp = document.getElementById('resp')
        resp.textContent = em.responsibility

        tasklist = em.tasks
        list = document.querySelector('.list')

        tasklist.forEach(function (object) {

        let task = document.createElement('div');
            task.innerHTML = '<div class="elmnt"><input type="checkbox" class="chk" name="" id=""><span class="task-name">object</span></div>';
            list.appendChild(task);
        });
    </script>
</body>

</html>